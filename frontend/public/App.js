"use strict";function e(){}function t(e){return e()}function a(e){e.forEach(t)}function o(t,...a){if(null==t)return e;const o=t.subscribe(...a);return o.unsubscribe?()=>o.unsubscribe():o}let n;function i(e){n=e}function r(){if(!n)throw new Error("Function called outside component initialization");return n}function l(e){r().$$.on_mount.push(e)}function s(){const e=r();return(t,a,{cancelable:o=!1}={})=>{const n=e.$$.callbacks[t];if(n){const i=function(e,t,{bubbles:a=!1,cancelable:o=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,a,o,t),n}(t,a,{cancelable:o});return n.slice().forEach((t=>{t.call(e,i)})),!i.defaultPrevented}return!0}}function d(e,t){return r().$$.context.set(e,t),t}function c(e){return r().$$.context.get(e)}Promise.resolve();const u=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),m=/[\s'">/=\u{FDD0}-\u{FDEF}\u{FFFE}\u{FFFF}\u{1FFFE}\u{1FFFF}\u{2FFFE}\u{2FFFF}\u{3FFFE}\u{3FFFF}\u{4FFFE}\u{4FFFF}\u{5FFFE}\u{5FFFF}\u{6FFFE}\u{6FFFF}\u{7FFFE}\u{7FFFF}\u{8FFFE}\u{8FFFF}\u{9FFFE}\u{9FFFF}\u{AFFFE}\u{AFFFF}\u{BFFFE}\u{BFFFF}\u{CFFFE}\u{CFFFF}\u{DFFFE}\u{DFFFF}\u{EFFFE}\u{EFFFF}\u{FFFFE}\u{FFFFF}\u{10FFFE}\u{10FFFF}]/u;const v=/[&"]/g,f=/[&<]/g;function p(e,t=!1){const a=String(e),o=t?v:f;o.lastIndex=0;let n="",i=0;for(;o.test(a);){const e=o.lastIndex-1,t=a[e];n+=a.substring(i,e)+("&"===t?"&amp;":'"'===t?"&quot;":"&lt;"),i=e+1}return n+a.substring(i)}function h(e){return"string"==typeof e||e&&"object"==typeof e?p(e,!0):e}function g(e){const t={};for(const a in e)t[a]=h(e[a]);return t}function y(e,t){let a="";for(let o=0;o<e.length;o+=1)a+=t(e[o],o);return a}const b={$$render:()=>""};function $(e,t){if(!e||!e.$$render)throw"svelte:component"===t&&(t+=" this={...}"),new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);return e}let w;function x(e){function t(t,a,o,r,l){const s=n;i({$$:{on_destroy:w,context:new Map(l||(s?s.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:Object.create(null)}});const d=e(t,a,o,r);return i(s),d}return{render:(e={},{$$slots:o={},context:n=new Map}={})=>{w=[];const i={title:"",head:"",css:new Set},r=t(i,e,{},o,n);return a(w),{html:r,css:{code:Array.from(i.css).map((e=>e.code)).join("\n"),map:null},head:i.title+i.head}},$$render:t}}function T(e,t,a){if(null==t||a&&!t)return"";return` ${e}${a&&!0===t?"":`="${p(t,!0)}"`}`}function F(e){return Object.keys(e).filter((t=>e[t])).map((t=>`${t}: ${e[t]};`)).join(" ")}const N=[];function k(t,a=e){let o;const n=new Set;function i(e){if(i=e,((a=t)!=a?i==i:a!==i||a&&"object"==typeof a||"function"==typeof a)&&(t=e,o)){const e=!N.length;for(const e of n)e[1](),N.push(e,t);if(e){for(let e=0;e<N.length;e+=2)N[e][0](N[e+1]);N.length=0}}var a,i}return{set:i,update:function(e){i(e(t))},subscribe:function(r,l=e){const s=[r,l];return n.add(s),1===n.size&&(o=a(i)||e),r(t),()=>{n.delete(s),0===n.size&&(o(),o=null)}}}}function _(t,n,i){const r=!Array.isArray(t),l=r?[t]:t,s=n.length<2;return d=t=>{let i=!1;const d=[];let c=0,u=e;const m=()=>{if(c)return;u();const a=n(r?d[0]:d,t);s?t(a):u="function"==typeof a?a:e},v=l.map(((e,t)=>o(e,(e=>{d[t]=e,c&=~(1<<t),i&&m()}),(()=>{c|=1<<t}))));return i=!0,m(),function(){a(v),u()}},{subscribe:k(i,d).subscribe};var d}const C={},E={};function B(e){return{...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}}const L=function(e,t){const a=[];let o=B(e);return{get location(){return o},listen(t){a.push(t);const n=()=>{o=B(e),t({location:o,action:"POP"})};return e.addEventListener("popstate",n),()=>{e.removeEventListener("popstate",n);const o=a.indexOf(t);a.splice(o,1)}},navigate(t,{state:n,replace:i=!1}={}){n={...n,key:Date.now()+""};try{i?e.history.replaceState(n,null,t):e.history.pushState(n,null,t)}catch(a){e.location[i?"replace":"assign"](t)}o=B(e),a.forEach((e=>e({location:o,action:"PUSH"})))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(e="/"){let t=0;const a=[{pathname:e,search:""}],o=[];return{get location(){return a[t]},addEventListener(e,t){},removeEventListener(e,t){},history:{get entries(){return a},get index(){return t},get state(){return o[t]},pushState(e,n,i){const[r,l=""]=i.split("?");t++,a.push({pathname:r,search:l}),o.push(e)},replaceState(e,n,i){const[r,l=""]=i.split("?");a[t]={pathname:r,search:l},o[t]=e}}}}()),A=/^:(.+)/;function S(e,t){return e.substr(0,t.length)===t}function I(e){return"*"===e[0]}function P(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function D(e){return e.replace(/(^\/+|\/+$)/g,"")}function G(e,t){return{route:e,score:e.default?0:P(e.path).reduce(((e,t)=>(e+=4,!function(e){return""===e}(t)?!function(e){return A.test(e)}(t)?I(t)?e-=5:e+=3:e+=2:e+=1,e)),0),index:t}}function O(e,t){let a,o;const[n]=t.split("?"),i=P(n),r=""===i[0],l=function(e){return e.map(G).sort(((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index))}(e);for(let e=0,n=l.length;e<n;e++){const n=l[e].route;let s=!1;if(n.default){o={route:n,params:{},uri:t};continue}const d=P(n.path),c={},u=Math.max(i.length,d.length);let m=0;for(;m<u;m++){const e=d[m],t=i[m];if(void 0!==e&&I(e)){c["*"===e?"*":e.slice(1)]=i.slice(m).map(decodeURIComponent).join("/");break}if(void 0===t){s=!0;break}let a=A.exec(e);if(a&&!r){const e=decodeURIComponent(t);c[a[1]]=e}else if(e!==t){s=!0;break}}if(!s){a={route:n,params:c,uri:"/"+i.slice(0,m).join("/")};break}}return a||o||null}function M(e,t){return e+(t?`?${t}`:"")}function j(e,t){return`${D("/"===t?e:`${D(e)}/${D(t)}`)}/`}const H=x(((e,t,a,n)=>{let i,r,s,u,m,v,{basepath:f="/"}=t,{url:p=null}=t;const h=c(C),g=c(E),y=k([]);u=o(y,(e=>s=e));const b=k(null);let $=!1;const w=h||k(p?{pathname:p}:L.location);r=o(w,(e=>i=e));const x=g?g.routerBase:k({path:f,uri:f});v=o(x,(e=>m=e));const T=_([x,b],(([e,t])=>{if(null===t)return e;const{path:a}=e,{route:o,uri:n}=t;return{path:o.default?a:o.path.replace(/\*.*$/,""),uri:n}}));h||(l((()=>L.listen((e=>{w.set(e.location)})))),d(C,w)),d(E,{activeRoute:b,base:x,routerBase:T,registerRoute:function(e){const{path:t}=m;let{path:a}=e;if(e._path=a,e.path=j(t,a),"undefined"==typeof window){if($)return;const t=function(e,t){return O([e],t)}(e,i.pathname);t&&(b.set(t),$=!0)}else y.update((t=>(t.push(e),t)))},unregisterRoute:function(e){y.update((t=>{const a=t.indexOf(e);return t.splice(a,1),t}))}}),void 0===t.basepath&&a.basepath&&void 0!==f&&a.basepath(f),void 0===t.url&&a.url&&void 0!==p&&a.url(p);{const{path:e}=m;y.update((t=>(t.forEach((t=>t.path=j(e,t._path))),t)))}{const e=O(s,i.pathname);b.set(e)}return r(),u(),v(),`${n.default?n.default({}):""}`})),R=x(((e,t,a,n)=>{let i,l,s,d,{path:u=""}=t,{component:m=null}=t;const{registerRoute:v,unregisterRoute:f,activeRoute:p}=c(E);l=o(p,(e=>i=e));d=o(c(C),(e=>s=e));const h={path:u,default:""===u};let g={},y={};var w;v(h),"undefined"!=typeof window&&(w=()=>{f(h)},r().$$.on_destroy.push(w)),void 0===t.path&&a.path&&void 0!==u&&a.path(u),void 0===t.component&&a.component&&void 0!==m&&a.component(m),i&&i.route===h&&(g=i.params);{const{path:e,component:a,...o}=t;y=o}return l(),d(),""+(null!==i&&i.route===h?""+(null!==m?`${$(m||b,"svelte:component").$$render(e,Object.assign({location:s},g,y),{},{})}`:`${n.default?n.default({params:g,location:s}):""}`):"")})),U=x(((e,t,a,n)=>{let i,r,l,d,v,f=function(e,t){const a={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(a[o]=e[o]);return a}(t,["to","replace","state","getProps"]),{to:p="#"}=t,{replace:y=!1}=t,{state:b={}}=t,{getProps:$=(()=>({}))}=t;const{base:w}=c(E);v=o(w,(e=>d=e));let x,T,N,k;return l=o(c(C),(e=>r=e)),s(),void 0===t.to&&a.to&&void 0!==p&&a.to(p),void 0===t.replace&&a.replace&&void 0!==y&&a.replace(y),void 0===t.state&&a.state&&void 0!==b&&a.state(b),void 0===t.getProps&&a.getProps&&void 0!==$&&a.getProps($),x="/"===p?d.uri:function(e,t){if(S(e,"/"))return e;const[a,o]=e.split("?"),[n]=t.split("?"),i=P(a),r=P(n);if(""===i[0])return M(n,o);if(!S(i[0],"."))return M(("/"===n?"":"/")+r.concat(i).join("/"),o);const l=r.concat(i),s=[];return l.forEach((e=>{".."===e?s.pop():"."!==e&&s.push(e)})),M("/"+s.join("/"),o)}(p,d.uri),T=S(r.pathname,x),N=x===r.pathname,i=N?"page":void 0,k=$({location:r,href:x,isPartiallyCurrent:T,isCurrent:N}),l(),v(),`<a${function(e,t){const a=Object.assign({},...e);if(t){const e=t.classes,o=t.styles;e&&(null==a.class?a.class=e:a.class+=" "+e),o&&(null==a.style?a.style=F(o):a.style=F(function(e,t){const a={};for(const t of e.split(";")){const e=t.indexOf(":"),o=t.slice(0,e).trim(),n=t.slice(e+1).trim();o&&(a[o]=n)}for(const e in t){const o=t[e];o?a[e]=o:delete a[e]}return a}(a.style,o)))}let o="";return Object.keys(a).forEach((e=>{if(m.test(e))return;const t=a[e];!0===t?o+=" "+e:u.has(e.toLowerCase())?t&&(o+=" "+e):null!=t&&(o+=` ${e}="${t}"`)})),o}([{href:h(x)},{"aria-current":h(i)},g(k),g(f)],{})}>${n.default?n.default({}):""}</a>`}));function z(){let e=window.innerWidth;document.getElementById("team-1").classList.remove("top-left"),document.getElementById("team-1").classList.remove("top-right"),document.getElementById("team-2").classList.remove("top-right"),document.getElementById("team-4").classList.remove("top-right"),document.getElementById("team-17").classList.remove("bottom-left"),document.getElementById("team-18").classList.remove("bottom-left"),document.getElementById("team-19").classList.remove("bottom-left"),document.getElementById("team-20").classList.remove("bottom-left"),document.getElementById("team-20").classList.remove("bottom-right"),e<500?(document.getElementById("team-1").classList.add("top-both"),document.getElementById("team-20").classList.add("bottom-both")):e<1100?(document.getElementById("team-1").classList.add("top-left"),document.getElementById("team-2").classList.add("top-right"),document.getElementById("team-19").classList.add("bottom-left"),document.getElementById("team-20").classList.add("bottom-right")):(document.getElementById("team-1").classList.add("top-left"),document.getElementById("team-4").classList.add("top-right"),document.getElementById("team-17").classList.add("bottom-left"),document.getElementById("team-20").classList.add("bottom-right"))}const W=x(((e,t,a,o)=>{let n=["Manchester City","Liverpool","Chelsea","Tottenham Hotspur","Arsenal","Manchester United","West Ham United","Leicester City","Brighton and Hove Albion","Wolverhampton Wanderers","Newcastle United","Crystal Palace","Brentford","Aston Villa","Southampton","Everton","Leeds United","Fulham","Bournemouth","Nottingham Forest"];return l((()=>(window.addEventListener("resize",z,!0),z(),()=>{window.removeEventListener("resize",z,!0)}))),`${e.head+=(e.title="<title>Premier League</title>","")+'<meta name="description" content="Premier League Statistics Dashboard">',""}\n\n${$(H,"Router").$$render(e,{},{},{default:()=>`<div class="header">${$(U,"Link").$$render(e,{to:"/"},{},{default:()=>'<div class="title main-link no-decoration">Premier League</div>'})}</div>\n  <div class="page-content"><div class="teams">${y(n,((t,a)=>`${$(U,"Link").$$render(e,{to:"/"+t.toLowerCase().replace(/ /g,"-"),class:"team-button",id:"team-"+(a+1),style:"background-color: var(--"+t.toLowerCase().replace(/ /g,"-")+");"},{},{default:()=>`<div class="main-link" style="${"color: var(--"+p(t.toLowerCase().replace(/ /g,"-"),!0)+"-secondary);"}">${p(t)}</div>\n        `})}`))}</div></div>`})}\n\n`}));function V(e){switch(e){case"Brighton and Hove Albion":return"BHA";case"Manchester City":return"MCI";case"Manchester United":return"MUN";case"Aston Villa":return"AVL";case"Sheffield United":return"SHU";case"West Bromwich Albion":return"WBA";case"West Ham United":return"WHU"}return e.slice(0,3).toUpperCase()}const Y=x(((e,t,a,o)=>{let n,i,r;let{data:l,currentMatchday:s,fullTeamName:d}=t;return void 0===t.data&&a.data&&void 0!==l&&a.data(l),void 0===t.currentMatchday&&a.currentMatchday&&void 0!==s&&a.currentMatchday(s),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==d&&a.fullTeamName(d),d&&function(){let e=function(e,t){return Object.keys(e.form[e._id][t]).sort((function(a,o){return new Date(e.form[e._id][t][a].date)-new Date(e.form[e._id][t][o].date)}))}(l,d),t=e.slice(-5);n=function(e,t){let a=[];Object.keys(e.form[e._id][t][s]).length>0&&(a=e.form[e._id][t][s].form5.split(""));for(let e=a.length;e<5;e++)a.unshift("N");return a}(l,d),i=function(e,t,a){let o=[];for(let n of a)o.unshift(e.form[e._id][t][n].beatStarTeam?"star-team":"");for(let e=o.length;e<5;e++)o.unshift("");return o}(l,d,t),r=function(e,t,a){let o=[];for(let n of a)o.unshift(V(e.form[e._id][t][n].team));for(let e=o.length;e<5;e++)o.unshift("");return o}(l,d,t)}(),`${null!=r?`<div class="current-form-row"><div class="${"icon pos-0 "+p(n[0],!0)+" "+p(i[0],!0)}"></div>\n    <div class="${"icon pos-1 "+p(n[1],!0)+" "+p(i[1],!0)}"></div>\n    <div class="${"icon pos-2 "+p(n[2],!0)+" "+p(i[2],!0)}"></div>\n    <div class="${"icon pos-3 "+p(n[3],!0)+" "+p(i[3],!0)}"></div>\n    <div class="${"icon pos-4 "+p(n[4],!0)+" "+p(i[4],!0)}"></div></div>\n  <div class="current-form-row"><div class="icon-name pos-0">${p(r[0])}</div>\n    <div class="icon-name pos-1">${p(r[1])}</div>\n    <div class="icon-name pos-2">${p(r[2])}</div>\n    <div class="icon-name pos-3">${p(r[3])}</div>\n    <div class="icon-name pos-4">${p(r[4])}</div></div>`:""}\n<div class="current-form">Current form:\n  ${null!=s?`${p((100*l.form[l._id][d][s].formRating5).toFixed(1))}%`:"None"}</div>\n\n`}));const q=x(((e,t,a,o)=>{let n,{data:i,team:r,fullTeamName:l,getAlias:s,switchTeam:d}=t;return void 0===t.data&&a.data&&void 0!==i&&a.data(i),void 0===t.team&&a.team&&void 0!==r&&a.team(r),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==l&&a.fullTeamName(l),void 0===t.getAlias&&a.getAlias&&void 0!==s&&a.getAlias(s),void 0===t.switchTeam&&a.switchTeam&&void 0!==d&&a.switchTeam(d),l&&function(){let e,t=Object.keys(i.standings).sort((function(e,t){return i.standings[e][i._id].position-i.standings[t][i._id].position})),[a,o]=function(e,t){let a=e.indexOf(t),o=a-3,n=a+4;o<0&&(n-=o,o=0);n>e.length-1&&(o-=n-e.length,n=e.length);return[o,n]}(t,l),r=[];for(let n=a;n<o;n++)t[n]==l&&(e=n-a),r.push({name:t[n],position:i.standings[t[n]][i._id].position,points:i.standings[t[n]][i._id].points,gd:i.standings[t[n]][i._id].gD});n={teamTableIdx:e,rows:r}}(),`<div class="table-snippet">${null!=n?`<div class="divider"></div>\n    <div class="table-row"><div class="table-element table-position column-title"></div>\n      <div class="table-element table-team-name column-title">Team</div>\n      <div class="table-element table-gd column-title">GD</div>\n      <div class="table-element table-points column-title">Points</div></div>\n\n    ${y(n.rows,((e,t)=>`\n      ${0==t?""+(t!=n.teamTableIdx?'<div id="divider"></div>':""):""+(t-1!=n.teamTableIdx&&t!=n.teamTableIdx?'<div id="divider"></div>':"")}\n      \n      ${t==n.teamTableIdx?`\n        <div class="table-row this-team" style="${"background-color: var(--"+p(r,!0)+");"}"><div class="table-element table-position this-team" style="${"color: var(--"+p(r,!0)+"-secondary);"}">${p(e.position)}</div>\n          <a href="${"/"+p(r,!0)}" class="table-element table-team-name this-team" style="${"color: var(--"+p(r,!0)+"-secondary);"}">${p(s(e.name))}</a>\n          <div class="table-element table-gd this-team" style="${"color: var(--"+p(r,!0)+"-secondary);"}">${p(e.gd)}</div>\n          <div class="table-element table-points this-team" style="${"color: var(--"+p(r,!0)+"-secondary);"}">${p(e.points)}</div>\n        </div>`:`\n        <div class="table-row"><div class="table-element table-position">${p(e.position)}</div>\n          <button class="table-element table-team-name">${p(s(e.name))}</button>\n          <div class="table-element table-gd">${p(e.gd)}</div>\n          <div class="table-element table-points">${p(e.points)}</div>\n        </div>`}`))}\n    ${6!=n.teamTableIdx?'<div id="divider"></div>':""}`:""}</div>\n\n`})),X=x(((e,t,a,o)=>{let{data:n}=t;return void 0===t.data&&a.data&&void 0!==n&&a.data(n),`<div class="next-game-prediction"><div class="next-game-season-complete"><h1 class="next-game-title-text">${p(n._id)}/${p(n._id+1)} SEASON COMPLETE\n    </h1></div></div>`}));const Z=x(((e,t,a,o)=>{let n,{data:i,fullTeamName:r,currentMatchday:l,showBadge:s,getAlias:d,switchTeam:c}=t;return void 0===t.data&&a.data&&void 0!==i&&a.data(i),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==r&&a.fullTeamName(r),void 0===t.currentMatchday&&a.currentMatchday&&void 0!==l&&a.currentMatchday(l),void 0===t.showBadge&&a.showBadge&&void 0!==s&&a.showBadge(s),void 0===t.getAlias&&a.getAlias&&void 0!==d&&a.getAlias(d),void 0===t.switchTeam&&a.switchTeam&&void 0!==c&&a.switchTeam(c),r&&null!=i.upcoming[r].nextTeam&&(n=i.upcoming[r].nextTeam.toLowerCase().replace(/ /g,"-")),`<div class="next-game-prediction" style="${"border: 6px solid var(--"+p(n,!0)+");"}"><div class="next-game-title" style="${"background-color: var(--"+p(n,!0)+");"}"><h1 class="next-game-title-text" style="${"color: var(--"+p(n,!0)+"-secondary);"}">Next Game: \n      <button style="color: inherit">${p(d(i.upcoming[r].nextTeam))} </button>\n      (${p(i.upcoming[r].atHome?"Home":"Away")})\n    </h1></div>\n\n  <div class="next-game-values"><div class="predictions-and-logo">${s?`<div class="next-game-logo opposition-badge" style="${"background-image: url('"+p(i.logoURLs[i.upcoming[r].nextTeam],!0)+"')"}"></div>`:'<div class="next-game-position"></div>'}\n      <div class="predictions"><div class="next-game-item"><div class="next-game-position">${p(function(e){let t=e%100;return e+([,"st","nd","rd"][t>20?t%10:t]||"th")}(i.standings[i.upcoming[r].nextTeam][i._id].position))}</div></div>\n        <div class="next-game-item">Current form:\n          ${null!=l?`<b>${p((100*i.form[i._id][i.upcoming[r].nextTeam][l].formRating5).toFixed(1))}%</b>`:"None"}</div>\n        <div class="next-game-item">Score prediction\n          <br>\n          <a class="predictions-link" href="/predictions"><b>${p(Math.round(i.upcoming[r].prediction.homeGoals))} - ${p(Math.round(i.upcoming[r].prediction.awayGoals))}</b></a>\n          <br>\n          </div></div></div>\n    <div class="past-results">${0==i.upcoming[r].prevMatches.length?'<div class="next-game-item prev-results-title no-prev-results">No Previous Results\n        </div>':'<div class="next-game-item prev-results-title">Previous Results</div>'}\n\n      \n      ${y(i.upcoming[r].prevMatches,(e=>`<div class="${"next-game-item "+p(e.result,!0)}"><div class="past-result"><div class="home-team">${p(d(e.homeTeam))}</div>\n            <div class="score">${p(e.homeGoals)} - ${p(e.awayGoals)}</div>\n            <div class="away-team">${p(d(e.awayTeam))}</div></div>\n          <div style="clear: both"></div>\n          <div class="past-result-date">${p(new Date(e.date).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"}))}</div>\n        </div>`))}</div></div></div>\n\n`})),J=x(((e,t,a,o)=>{let{data:n,currentMatchday:i,fullTeamName:r,showBadge:l,getAlias:s,switchTeam:d}=t;return void 0===t.data&&a.data&&void 0!==n&&a.data(n),void 0===t.currentMatchday&&a.currentMatchday&&void 0!==i&&a.currentMatchday(i),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==r&&a.fullTeamName(r),void 0===t.showBadge&&a.showBadge&&void 0!==l&&a.showBadge(l),void 0===t.getAlias&&a.getAlias&&void 0!==s&&a.getAlias(s),void 0===t.switchTeam&&a.switchTeam&&void 0!==d&&a.switchTeam(d),""+(null!=n?""+(null==n.upcoming[r].nextTeam?`${$(X,"SeasonComplete").$$render(e,{data:n},{},{})}`:`${$(Z,"NextGameStats").$$render(e,{data:n,currentMatchday:i,fullTeamName:r,showBadge:l,getAlias:s,switchTeam:d},{},{})}`):"")}));function K(e){let t=e%100;return e+([,"st","nd","rd"][t>20?t%10:t]||"th")}function Q(e,t,a,o){let n=Object.keys(e.seasonStats).sort((function(a,o){return e.seasonStats[o][t]-e.seasonStats[a][t]})).indexOf(a)+1;return o&&(n=21-n),n}const ee=x(((e,t,a,o)=>{function n(){document.documentElement.style.setProperty("--ssp1-offset",-r.clientWidth/2+"px"),document.documentElement.style.setProperty("--ssp2-offset",-s.clientWidth/2+"px"),document.documentElement.style.setProperty("--ssp3-offset",-d.clientWidth/2+"px")}function i(){c=function(e,t){return{xG:K(Q(e,"xG",t,!1)),xC:K(Q(e,"xC",t,!0)),cleanSheetRatio:K(Q(e,"cleanSheetRatio",t,!1))}}(m,v),window.addEventListener("resize",n)}let r,s,d,c={xG:"",xC:"",cleanSheetRatio:""},u=!1;l((()=>{i(),u=!0}));let{data:m,fullTeamName:v}=t;return void 0===t.data&&a.data&&void 0!==m&&a.data(m),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==v&&a.fullTeamName(v),v&&u&&i(),`<div class="season-stats"><div class="season-stat goals-per-game"><div class="season-stat-value">${p(m.seasonStats[v].xG)}\n      <div class="${"season-stat-position ssp-"+p(c.xG,!0)}" id="ssp1"${T("this",r,0)}>${p(c.xG)}</div></div>\n    <div class="season-stat-text">goals per game</div></div>\n  <div class="season-stat conceded-per-game"><div class="season-stat-value">${p(m.seasonStats[v].xC)}\n      <div class="${"season-stat-position ssp-"+p(c.xC,!0)}" id="ssp2"${T("this",s,0)}>${p(c.xC)}</div></div>\n    <div class="season-stat-text">conceded per game</div></div>\n  <div class="season-stat clean-sheet-ratio"><div class="season-stat-value">${p(m.seasonStats[v].cleanSheetRatio)}\n      <div class="${"season-stat-position ssp-"+p(c.cleanSheetRatio,!0)}" id="ssp3"${T("this",d,0)}>${p(c.cleanSheetRatio)}</div></div>\n    <div class="season-stat-text">clean sheets</div></div></div>\n\n`})),te=x(((e,t,a,o)=>{let{lastUpdated:n}=t;return void 0===t.lastUpdated&&a.lastUpdated&&void 0!==n&&a.lastUpdated(n),`<div class="teams-footer footer-text-colour"><a class="ko-fi" href="https://ko-fi.com/C0C069FOI" target="_blank"><img class="ko-fi-img" src="img/kofi.png" alt="">\n    <div class="ko-fi-text">Support Me</div></a>\n  <div class="teams-footer-bottom">${null!=n?`<div class="last-updated">Last updated: ${p(n)} UTC</div>`:""}\n    <div class="footer-details"><div class="footer-detail footer-text-colour">Data provided by\n        <a class="footer-text-colour underline" href="https://www.football-data.org/">football-data.org</a></div>\n      <div class="footer-detail footer-text-colour">Graphs created using\n        <a class="footer-text-colour underline" href="https://plotly.com/">Plotly</a></div>\n      <div class="footer-detail footer-text-colour">Font made from\n        <a class="footer-text-colour" href="http://www.onlinewebfonts.com">oNline Web Fonts</a>\n        is licensed by CC BY 3.0\n      </div></div>\n    <div class="footer-bottom"><div class="created-by footer-text-colour">Created by Tom Draper</div>\n      <div class="version footer-text-colour">v2.0</div></div></div></div>\n\n`}));function ae(e){let t,a=e.atHome?"Home":"Away";return t=null!=e.score?`${e.team} (${a}) ${e.score}`:`${e.team} (${a})`,t}function oe(e,t){let a=[];return e<=t&&(a={type:"line",x0:e,y0:-4,x1:e,y1:104,line:{color:"black",dash:"dot",width:1}}),a}const ne=x(((e,t,a,o)=>{function n(e){let[t,a,o]=function(){let e=[],t=[],a=[];for(let o=1;o<=38;o++){let n=c.fixtures[u][o];e.push(new Date(n.date));let i=c.teamRatings[n.team].totalRating;n.atHome&&(i*=1-c.homeAdvantages[n.team].totalHomeAdvantage),t.push(100*i);let r=ae(n);a.push(r)}return[e,t,a]}();!function(e,t,a){let o=[];for(let n=0;n<e.length;n++)o.push({x:e[n],y:t[n],details:a[n]});o.sort((function(e,t){return e.x<t.x?-1:e.x==t.x?0:1}));for(let n=0;n<o.length;n++)e[n]=o[n].x,t[n]=o[n].y,a[n]=o[n].details}(t,a,o);let n=Array.from({length:38},((e,t)=>t+1)),i=Array(t.length).fill(13);return i=function(e,t,a,o){let n,i=Number.POSITIVE_INFINITY;for(let e=0;e<t.length;e++){let o=t[e]-a;0<o&&o<i&&(i=o,n=e)}return null!=n&&(e[n]=o),e}(i,t,e,26),{x:t,y:a,type:"scatter",mode:"lines+markers",text:o,line:{color:"#737373"},marker:{size:i,colorscale:[[0,"#01c626"],[.5,"#f3f3f3"],[1,"#fc1303"]],color:a},customdata:n,hovertemplate:"<b>%{text}</b><br>Matchday %{customdata}<br>%{x|%d %b %Y}<br>Team rating: <b> %{y:.1f}%</b><extra></extra>"}}function i(e,t){let a=Date.now(),o=n(a),i=Array.from(Array(11),((e,t)=>10*t)),[r,l]=function(e){let t=new Date(e[0]);t.setDate(t.getDate()-12);let a=new Date(e[e.length-1]);return a.setDate(a.getDate()+12),[t,a]}(o.x);return{data:[o],layout:{title:!1,autosize:!0,margin:{r:20,l:50,t:5,b:40,pad:5},hovermode:"closest",plot_bgcolor:"#fafafa",paper_bgcolor:"#fafafa",yaxis:{title:{text:"Team Rating"},gridcolor:"gray",showline:!1,zeroline:!1,fixedrange:!0,ticktext:i,tickvals:i},xaxis:{linecolor:"black",showgrid:!1,showline:!1,range:[r,l],fixedrange:!0},shapes:[oe(a,l)]},config:{responsive:!0,showSendToCloud:!1,displayModeBar:!1}}}let r,s,d=!1;l((()=>{s=i(),new Plotly.newPlot(r,s.data,s.layout,s.config).then((e=>{e.children[0].children[0].classList.add("resizable-graph")})),d=!0}));let{data:c,fullTeamName:u}=t;return void 0===t.data&&a.data&&void 0!==c&&a.data(c),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==u&&a.fullTeamName(u),u&&function(){if(d){let e=n(Date.now());s.data[0]=e,Plotly.redraw(r)}}(),`<div id="plotly"><div id="plotDiv"${T("this",r,0)}></div></div>`}));function ie(e,t,a,o){let n,i=Object.keys(e.form[e._id][a]),r=[];for(let t of i){let o=e.form[e._id][a][t].formRating5;r.push(100*o)}if(o){let e=a[0].toLowerCase()+a.slice(1);e=e.replace(/ ([A-Z])/g,"-$1").toLowerCase(),n={color:getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),width:4}}else n={color:"#d3d3d3"};return{x:t,y:r,name:a,mode:"lines",line:n,text:i,hovertemplate:`<b>${a}</b><br>Matchday %{text}<br>%{x|%d %b %Y}<br>Form: <b>%{y:.1f}%</b><extra></extra>`,showlegend:!1}}const re=x(((e,t,a,o)=>{function n(e){let t=[];for(let a=0;a<c.teamNames.length;a++)if(c.teamNames[a]!=u){let o=ie(c,e,c.teamNames[a],!1);t.push(o)}let a=ie(c,e,u,!0);return t.push(a),t}function i(e,t){let a=function(e,t){let a=Object.keys(e.form[e._id][t]);a.length<=1&&(a=Object.keys(e.fixtures[t]));let o=[];for(let t of a){let a=[];for(let o of e.teamNames)a.push(e.fixtures[o][t].date);a=a.map((e=>new Date(e))),a=a.sort(),o.push(a[Math.floor(a.length/2)])}return o.sort((function(e,t){return e-t})),o}(e,t),o=Array.from(Array(11),((e,t)=>10*t));return{data:n(a),layout:{title:!1,autosize:!0,margin:{r:20,l:50,t:15,b:40,pad:5},hovermode:"closest",plot_bgcolor:"#fafafa",paper_bgcolor:"#fafafa",yaxis:{title:{text:"Form Rating"},gridcolor:"gray",showgrid:!1,showline:!1,zeroline:!1,fixedrange:!0,ticktext:o,tickvals:o,range:[0,100]},xaxis:{linecolor:"black",showgrid:!1,showline:!1,fixedrange:!0,range:[a[0],a[a.length-1]]}},config:{responsive:!0,showSendToCloud:!1,displayModeBar:!1}}}let r,s,d=!1;l((()=>{s=i(c,u),new Plotly.newPlot(r,s.data,s.layout,s.config).then((e=>{e.children[0].children[0].classList.add("resizable-graph")})),d=!0}));let{data:c,fullTeamName:u}=t;return void 0===t.data&&a.data&&void 0!==c&&a.data(c),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==u&&a.fullTeamName(u),u&&function(){if(d){let e=i(c,u);for(let t=0;t<20;t++)s.data[t]=e.data[t];Plotly.redraw(r)}}(),`<div id="plotly"><div id="plotDiv"${T("this",r,0)}></div></div>`}));function le(e,t,a,o){let n,i=Object.keys(e.form[e._id][a]),r=[];for(let t of i){let o=e.form[e._id][a][t].position;r.push(o)}if(o){let e=a[0].toLowerCase()+a.slice(1);e=e.replace(/ ([A-Z])/g,"-$1").toLowerCase(),n={color:getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),width:4}}else n={color:"#d3d3d3"};return{x:t,y:r,name:a,mode:"lines",line:n,text:i,hovertemplate:`<b>${a}</b><br>Matchday %{text}<br>%{x|%d %b %Y}<br>Position: <b>%{y}</b><extra></extra>`,showlegend:!1}}const se=x(((e,t,a,o)=>{function n(e){let t=[];for(let a=0;a<c.teamNames.length;a++)if(c.teamNames[a]!=u){let o=le(c,e,c.teamNames[a],!1);t.push(o)}let a=le(c,e,u,!0);return t.push(a),t}function i(e,t){let a=function(e,t){let a=Object.keys(e.form[e._id][t]);a.length<=1&&(a=Object.keys(e.fixtures[t]));let o=[];for(let t of a){let a=[];e.teamNames.forEach((o=>{a.push(e.fixtures[o][t].date)})),a=a.map((e=>new Date(e))),a=a.sort(),o.push(a[Math.floor(a.length/2)])}return o.sort((function(e,t){return e-t})),o}(e,t),o=Array.from(Array(20),((e,t)=>t+1));return{data:n(a),layout:{title:!1,autosize:!0,margin:{r:20,l:50,t:15,b:40,pad:5},hovermode:"closest",plot_bgcolor:"#fafafa",paper_bgcolor:"#fafafa",yaxis:{title:{text:"Position"},gridcolor:"gray",showgrid:!1,showline:!1,zeroline:!1,autorange:"reversed",fixedrange:!0,ticktext:o,tickvals:o},xaxis:{linecolor:"black",showgrid:!1,showline:!1,fixedrange:!0},shapes:[{type:"rect",x0:a[0],y0:4.5,x1:a[a.length-1],y1:.5,line:{width:0},fillcolor:"#77DD77",opacity:.3,layer:"below"},{type:"rect",x0:a[0],y0:6.5,x1:a[a.length-1],y1:4.5,line:{width:0},fillcolor:"#4CDEEE",opacity:.3,layer:"below"},{type:"rect",x0:a[0],y0:20.5,x1:a[a.length-1],y1:17.5,line:{width:0},fillcolor:"#C23B22",opacity:.3,layer:"below"}]},config:{responsive:!0,showSendToCloud:!1,displayModeBar:!1}}}let r,s,d=!1;l((()=>{s=i(c,u),new Plotly.newPlot(r,s.data,s.layout,s.config).then((e=>{e.children[0].children[0].classList.add("resizable-graph")})),d=!0}));let{data:c,fullTeamName:u}=t;return void 0===t.data&&a.data&&void 0!==c&&a.data(c),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==u&&a.fullTeamName(u),u&&function(){if(d){let e=i(c,u);for(let t=0;t<20;t++)s.data[t]=e.data[t];Plotly.redraw(r)}}(),`<div id="plotly"><div id="plotDiv"${T("this",r,0)}></div></div>`}));function de(e,t){let a=function(e){let t={};for(let a of e.teamNames)for(let o of Object.keys(e.form[e._id][a])){let n=e.form[e._id][a][o].score;if(null!=n){let[e,a,i]=n.split(" ");e=parseInt(e),i=parseInt(i),o in t?t[o]+=e+i:t[o]=e+i}}for(let e of Object.keys(t))t[e]/=20;return t}(e),o=function(e){let t=[];for(let a=1;a<=38;a++){let o=[];for(let t of e.teamNames)o.push(e.fixtures[t][a].date);o=o.map((e=>new Date(e))),o=o.sort(),t.push(o[Math.floor(o.length/2)])}return t.sort((function(e,t){return e-t})),t}(e),n=Object.keys(a),[i,r]=function(e,t){let a={},o={};for(let n of Object.keys(e.form[e._id][t])){let i=e.form[e._id][t][n].score;if(null!=i){let[r,l,s]=i.split(" ");r=parseInt(r),s=parseInt(s),e.form[e._id][t][n].atHome?(a[n]=r,o[n]=s):(a[n]=s,o[n]=r)}}return[a,o]}(e,t);return{data:[{name:"Scored",type:"bar",x:o,y:Object.values(i),text:n,marker:{color:"#77DD77"},hovertemplate:"<b>Matchday %{text}</b><br>%{y} goals scored<extra></extra>"},{name:"Conceded",type:"bar",x:o,y:Object.values(r),text:n,marker:{color:"C23B22"},hovertemplate:"<b>Matchday %{text}</b><br>%{y} goals scored<extra></extra>"},{name:"Avg",type:"line",x:o,y:Object.values(a),text:n,hovertemplate:"<b>Matchday %{text}</b><br>%{y} goals<extra></extra>",line:{color:"#0080FF",width:2}}],layout:{title:!1,autosize:!0,margin:{r:20,l:50,t:15,b:15,pad:5},barmode:"stack",hovermode:"closest",plot_bgcolor:"#fafafa",paper_bgcolor:"#fafafa",yaxis:{title:{text:"Goals Scored"},gridcolor:"gray",showgrid:!1,showline:!1,zeroline:!1,fixedrange:!0,rangemode:"nonnegative"},xaxis:{linecolor:"black",showgrid:!1,showline:!1,fixedrange:!0,showticklabels:!1},legend:{x:1,xanchor:"right",y:1}},config:{responsive:!0,showSendToCloud:!1,displayModeBar:!1}}}const ce=x(((e,t,a,o)=>{let n,i,r=!1;l((()=>{i=de(s,d),new Plotly.newPlot(n,i.data,i.layout,i.config).then((e=>{e.children[0].children[0].classList.add("resizable-graph")})),r=!0}));let{data:s,fullTeamName:d}=t;return void 0===t.data&&a.data&&void 0!==s&&a.data(s),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==d&&a.fullTeamName(d),d&&function(){if(r){let e=de(s,d);i.data[0]=e.data[0],i.data[1]=e.data[1],Plotly.redraw(n)}}(),`<div id="plotly"><div id="plotDiv"${T("this",n,0)}></div></div>`}));function ue(e,t){let a=function(e){let t=[];for(let a=1;a<=38;a++){let o=[];for(let t of e.teamNames)o.push(e.fixtures[t][a].date);o=o.map((e=>new Date(e))),o=o.sort(),t.push(o[Math.floor(o.length/2)])}return t.sort((function(e,t){return e-t})),t}(e),o=Object.keys(e.form[e._id][t]),[n,i]=function(e,t){let a=[],o=[];for(let n of Object.keys(e.form[e._id][t])){let i=e.form[e._id][t][n].score;if(null!=i){let[r,l,s]=i.split(" ");r=parseInt(r),s=parseInt(s),e.form[e._id][t][n].atHome?s>0?(a.push(1),o.push(0)):(o.push(1),a.push(0)):r>0?(a.push(1),o.push(0)):(o.push(1),a.push(0))}}return[o,a]}(e,t);return{data:[{name:"Clean sheets",type:"bar",x:a,y:n,text:o,marker:{color:"#77DD77"},hovertemplate:"<b>Clean sheet<extra></extra>",showlegend:!1},{name:"Conceded",type:"bar",x:a,y:i,text:o,marker:{color:"C23B22"},hovertemplate:"<b>Goals conceded<extra></extra>",showlegend:!1}],layout:{title:!1,autosize:!0,height:60,margin:{r:20,l:50,t:0,b:40,pad:5},barmode:"stack",hovermode:"closest",plot_bgcolor:"#fafafa",paper_bgcolor:"#fafafa",yaxis:{title:{text:""},showticklabels:!1,gridcolor:"gray",showgrid:!1,showline:!1,zeroline:!1,fixedrange:!0},xaxis:{linecolor:"black",showgrid:!1,showline:!1,fixedrange:!0},shapes:[{type:"line",x0:a[0],y0:.5,x1:a[a.length-1],y1:.5,layer:"below",line:{color:"#d3d3d3",width:2}}]},config:{responsive:!0,showSendToCloud:!1,displayModeBar:!1}}}const me=x(((e,t,a,o)=>{let n,i,r=!1;l((()=>{i=ue(s,d),new Plotly.newPlot(n,i.data,i.layout,i.config),r=!0}));let{data:s,fullTeamName:d}=t;return void 0===t.data&&a.data&&void 0!==s&&a.data(s),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==d&&a.fullTeamName(d),d&&function(){if(r){let e=ue(s,d);i.data[0]=e.data[0],i.data[1]=e.data[1],Plotly.redraw(n)}}(),`<div id="plotly"><div id="plotDiv"${T("this",n,0)}></div></div>`})),ve=x(((e,t,a,o)=>{let n,i,r=!1;l((()=>{i=function(){let e=u();return{data:d(),layout:{title:!1,autosize:!0,margin:{r:0,l:50,t:15,b:40,pad:5},hovermode:"closest",barmode:"overlay",bargap:0,plot_bgcolor:"#fafafa",paper_bgcolor:"#fafafa",yaxis:{title:{text:"Frequency"},gridcolor:"gray",showgrid:!1,showline:!1,zeroline:!1,fixedrange:!0,rangemode:"nonnegative"},xaxis:{title:{text:"Goals Scored"},linecolor:"black",showgrid:!1,showline:!1,fixedrange:!0,ticktext:e,tickvals:e},legend:{x:1,xanchor:"right",y:.95}},config:{responsive:!0,showSendToCloud:!1,displayModeBar:!1}}}(),new Plotly.newPlot(n,i.data,i.layout,i.config).then((e=>{e.children[0].children[0].classList.add("resizable-graph")})),r=!0}));let{fullTeamName:s,getScoredBars:d,getScoredTeamBars:c,getXLabels:u}=t;return void 0===t.fullTeamName&&a.fullTeamName&&void 0!==s&&a.fullTeamName(s),void 0===t.getScoredBars&&a.getScoredBars&&void 0!==d&&a.getScoredBars(d),void 0===t.getScoredTeamBars&&a.getScoredTeamBars&&void 0!==c&&a.getScoredTeamBars(c),void 0===t.getXLabels&&a.getXLabels&&void 0!==u&&a.getXLabels(u),s&&r&&(i.data[1]=c(),Plotly.redraw(n)),`<div id="plotly"><div id="plotDiv"${T("this",n,0)}></div></div>`})),fe=x(((e,t,a,o)=>{let n,i,r=!1;l((()=>{i=function(){let e=u();return{data:d(),layout:{title:!1,autosize:!0,margin:{r:0,l:50,t:15,b:40,pad:5},hovermode:"closest",barmode:"overlay",bargap:0,plot_bgcolor:"#fafafa",paper_bgcolor:"#fafafa",yaxis:{title:{text:"Frequency"},gridcolor:"gray",showgrid:!1,showline:!1,zeroline:!1,fixedrange:!0,rangemode:"nonnegative"},xaxis:{title:{text:"Goals Conceded"},linecolor:"black",showgrid:!1,showline:!1,fixedrange:!0,ticktext:e,tickvals:e},legend:{x:1,xanchor:"right",y:.95}},config:{responsive:!0,showSendToCloud:!1,displayModeBar:!1}}}(),new Plotly.newPlot(n,i.data,i.layout,i.config).then((e=>{e.children[0].children[0].classList.add("resizable-graph")})),r=!0}));let{fullTeamName:s,getConcededBars:d,getConcededTeamBars:c,getXLabels:u}=t;return void 0===t.fullTeamName&&a.fullTeamName&&void 0!==s&&a.fullTeamName(s),void 0===t.getConcededBars&&a.getConcededBars&&void 0!==d&&a.getConcededBars(d),void 0===t.getConcededTeamBars&&a.getConcededTeamBars&&void 0!==c&&a.getConcededTeamBars(c),void 0===t.getXLabels&&a.getXLabels&&void 0!==u&&a.getXLabels(u),s&&r&&(i.data[1]=c(),Plotly.redraw(n)),`<div id="plotly"><div id="plotDiv"${T("this",n,0)}></div></div>`}));function pe(e,t,a){return{x:Object.keys(e),y:Object.values(e),type:"bar",name:t,marker:{color:a},line:{width:0},hovertemplate:"%{x} goals in %{y} games<extra></extra>",hoverinfo:"x+y",opacity:.6}}function he(e,t){let a={};for(let o of Object.keys(e.form[e._id][t])){let n=e.form[e._id][t][o].score;if(null!=n){let[i,r,l]=n.split(" ");e.form[e._id][t][o].atHome?i in a?a[i]+=1:a[i]=1:l in a?a[l]+=1:a[l]=1}}return a}function ge(e,t){let a={};for(let o of Object.keys(e.form[e._id][t])){let n=e.form[e._id][t][o].score;if(null!=n){let[i,r,l]=n.split(" ");e.form[e._id][t][o].atHome?l in a?a[l]+=1:a[l]=1:i in a?a[i]+=1:a[i]=1}}return a}const ye=x(((e,t,a,o)=>{function n(e,t,a){return[{x:Object.keys(r),y:Object.values(r),type:"bar",name:"Avg",marker:{color:"#C6C6C6"},line:{width:0},hovertemplate:"%{x} goals in %{y} games<extra></extra>",hoverinfo:"x+y"},pe(e,t,a)]}function i(){return Object.keys(r)}let r,s,d,c=!1;l((()=>{r=function(e){let t={};for(let a of e.teamNames)for(let o of Object.keys(e.form[e._id][a])){let n=e.form[e._id][a][o].score;if(null!=n){let[i,r,l]=n.split(" ");e.form[e._id][a][o].atHome&&(i in t?t[i]+=1:t[i]=1,l in t?t[l]+=1:t[l]=1)}}for(let e of Object.keys(t))t[e]/=20;return t}(u),s=he(u,m),d=ge(u,m),c=!0}));let{data:u,fullTeamName:m}=t;return void 0===t.data&&a.data&&void 0!==u&&a.data(u),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==m&&a.fullTeamName(m),m&&c&&(s=he(u,m),d=ge(u,m)),`<div class="two-graphs">${c?`<div class="graph freq-graph mini-graph">${$(ve,"GoalsScoredFreq").$$render(e,{fullTeamName:m,getScoredBars:function(){return n(s,"Goals scored","#77DD77")},getScoredTeamBars:function(){return pe(d,"Goals conceded","#C23B22")},getXLabels:i},{},{})}</div>\n  <div class="graph freq-graph mini-graphh">${$(fe,"GoalsConcededFreq").$$render(e,{fullTeamName:m,getConcededBars:function(){return n(d,"Goals conceded","#C23B22")},getConcededTeamBars:function(){return pe(s,"Goals scored","#77DD77")},getXLabels:i},{},{})}</div>`:""}</div>`}));function be(e,t){let a=0;for(let o in e)e[o]=e[o]/t*100,a+=e[o];return a/Object.keys(e).length}function $e(e){let t=0;for(let a in e)t+=e[a];return t/Object.keys(e).length}function we(e){let[t,a]=function(e){let t={},a=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;for(let n of e.teamNames){let i=0,r=0;for(let t in e.standings[n]){let l=e.standings[n][t].gF;l>0&&(i+=l,l>a?a=l:l<o&&(o=l),r+=1)}let l=null;r>0&&(l=i/r),t[n]=l}return[t,[o,a]]}(e);return t=function(e,t){let[a,o]=t;for(let t in e)null==e[t]?e[t]=0:e[t]=(e[t]-a)/(o-a)*100;return e}(t,a),t.avg=$e(t),t}function xe(e){let[t,a]=function(e){let t={},a=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;for(let n of e.teamNames){let i=0,r=0;for(let t in e.standings[n]){let l=e.standings[n][t].gA;l>0&&(i+=l,l>a?a=l:l<o&&(o=l),r+=1)}let l=null;r>0&&(l=i/r),t[n]=l}return[t,[o,a]]}(e);return t=function(e,t){let[a,o]=t;for(let t in e)null==e[t]?e[t]=0:e[t]=100-(e[t]-a)/(o-a)*100;return e}(t,a),t.avg=$e(t),t}function Te(e,t){let a=0;for(let o of Object.keys(e[t])){let n=e[t][o];if(null!=n.score){let[e,t,o]=n.score.split(" ");n.atHome&&0==o?a+=1:n.atHome||0!=e||(a+=1)}}return a}function Fe(e,t){let a=0,o=null;for(let n in e[t]){let i=e[t][n];if(null!=i.score){let e,[t,n,r]=i.score.split(" ");e=i.atHome&&t>r||!i.atHome&&t<r?"win":i.atHome&&t<r||!i.atHome&&t>r?"lost":"draw",null!=o&&o==e&&(a+=1),o=e}}return a}function Ne(e,t){let a=0,o=0;for(let n in e[t]){let i=e[t][n];if(null!=i.score){let[e,t,n]=i.score.split(" ");i.atHome&&e>n||!i.atHome&&e<n?(o+=1,o>a&&(a=o)):o=0}}return a}function ke(e,t){let a=e.indexOf(t);return a>-1&&e.splice(a,1),e}function _e(e,t,a){let o=0;for(let n in e[t]){let i=e[t][n];if(null!=i.score&&a.includes(i.team)){let[e,t,a]=i.score.split(" ");(i.atHome&&e>a||!i.atHome&&e<a)&&(o+=1)}}return o}const Ce=x(((e,t,a,o)=>{function n(){let e=r();$.data.unshift(e)}function i(e,t,a){return{name:e,type:"scatterpolar",r:t,theta:w,fill:"toself",marker:{color:a},hovertemplate:`<b>${e}</b><br>%{theta}: %{r}<extra></extra>`,hoveron:"points"}}function r(){return i("Avg",[u.avg,m.avg,v.avg,f.avg,h.avg,g.avg],"#ADADAD")}function s(e){let t=function(e){let t=e[0].toLowerCase()+e.slice(1);return t=t.replace(/ /g,"-").toLowerCase(),getComputedStyle(document.documentElement).getPropertyValue(`--${t}`)}(e);return i(e,[u[e],m[e],v[e],f[e],h[e],g[e]],t)}function d(e){return[r(),s(e)]}function c(e){u=we(e),m=xe(e),v=function(e){let t={},a=Number.NEGATIVE_INFINITY;for(let o of e.teamNames){let n=Te(e.form[e._id],o);o in e.form[e._id-1]&&(n+=Te(e.form[e._id-1],o)),n>a&&(a=n),t[o]=n}return t.avg=be(t,a),t}(e),f=function(e){let t={},a=Number.NEGATIVE_INFINITY;for(let o of e.teamNames){let n=Fe(e.form[e._id],o);o in e.form[e._id-1]&&(n+=Fe(e.form[e._id-1],o)),n>a&&(a=n),t[o]=n}return t.avg=be(t,a),t}(e),h=function(e){let t={},a=Number.NEGATIVE_INFINITY;for(let o of e.teamNames){let n=Ne(e.form[e._id],o);o in e.form[e._id-1]&&(n+=Ne(e.form[e._id-1],o)),n>a&&(a=n),t[o]=n}return t.avg=be(t,a),t}(e),g=function(e){let t={},a=Number.NEGATIVE_INFINITY;for(let o of e.teamNames){let n=["Manchester United","Liverpool","Manchester City","Arsenal","Chelsea","Tottenham Hotspur"];n=ke(n,o);let i=_e(e.form[e._id],o,n);o in e.form[e._id-1]&&(i+=_e(e.form[e._id-1],o,n)),i>a&&(a=i),t[o]=i}return t.avg=be(t,a),t}(e)}let u,m,v,f,h,g,b,$,w=["Attack","Defence","Clean Sheets","Consistency","Win Streak","vs Big 6"],x=[],F=!1;l((()=>{$=function(e,t){return c(e),{data:d(t),layout:{height:550,polar:{radialaxis:{visible:!0,range:[0,100]}},hover:"closest",margin:{t:25,b:25,l:75,r:75},showlegend:!1,plot_bgcolor:"#fafafa",paper_bgcolor:"#fafafa"},config:{responsive:!0,showSendToCloud:!1,displayModeBar:!1}}}(N,k),new Plotly.newPlot(b,$.data,$.layout,$.config).then((e=>{e.children[0].children[0].classList.add("resizable-spider-chart")})),document.getElementById("spider-opp-teams").children[0].classList.add("top-spider-opp-team-btn"),document.getElementById("spider-opp-teams").children[18].classList.add("bottom-spider-opp-team-btn"),F=!0}));let{data:N,fullTeamName:k,getAlias:_,getName:C}=t;return void 0===t.data&&a.data&&void 0!==N&&a.data(N),void 0===t.fullTeamName&&a.fullTeamName&&void 0!==k&&a.fullTeamName(k),void 0===t.getAlias&&a.getAlias&&void 0!==_&&a.getAlias(_),void 0===t.getName&&a.getName&&void 0!==C&&a.getName(C),k&&function(){if(F){let e=d(k);!function(e){let t=e.length;for(let a=0;a<t;a++)e.pop()}($.data),$.data.push(e[0]),$.data.push(e[1]),function(){for(let e=0;e<x.length;e++){for(let e=0;e<$.data.length;e++)if($.data[e].name==x[e]){$.data.splice(e,1);break}1==x.length&&n($.data),ke(x,x[e])}Plotly.redraw(b)}(),function(){let e=document.getElementById("spider-opp-teams");for(let t=0;t<e.children.length;t++){let a=e.children[t];""!=a.style.background&&(a.style.background="",a.style.color="black")}}()}}(),`<div class="spider-chart"><div id="plotly"><div id="plotDiv"${T("this",b,0)}></div></div></div>\n<div class="spider-opp-team-selector"><div class="spider-opp-team-btns" id="spider-opp-teams">${y(N.teamNames,(e=>""+(e!=k?`<button class="spider-opp-team-btn">${p(_(e))}</button>`:"")))}</div></div>\n\n`})),Ee=x(((e,t,a,o)=>{let{team:n,teams:i,getAlias:r,switchTeam:l}=t;return void 0===t.team&&a.team&&void 0!==n&&a.team(n),void 0===t.teams&&a.teams&&void 0!==i&&a.teams(i),void 0===t.getAlias&&a.getAlias&&void 0!==r&&a.getAlias(r),void 0===t.switchTeam&&a.switchTeam&&void 0!==l&&a.switchTeam(l),`<nav><div class="title no-selection"><p><span style="color: #00fe87">pl</span>dashboard\n    </p></div>\n  <div class="team-links">\n    ${y(i,((e,t)=>""+(e.toLowerCase().replace(/ /g,"-")==n?`<a href="${"/"+p(e.toLowerCase().replace(/ /g,"-"),!0)}" class="team-link"><div class="this-team-name" style="${"color: var(--"+p(e.toLowerCase().replace(/ /g,"-"),!0)+"-secondary); background-color: var(--"+p(e.toLowerCase().replace(/ /g,"-"),!0)+")"}">${p(r(e))}</div>\n        </a>`:`<button class="team-link"><div class="team-name">${p(r(e))}</div>\n        </button>`)))}</div>\n  <div class="close"><button class="close-btn"><img src="img/arrow-bar-left.svg" alt=""></button></div></nav>\n\n`})),Be=x(((e,t,a,o)=>{let n,{team:i,teams:r,getAlias:l,switchTeam:s}=t;return void 0===t.team&&a.team&&void 0!==i&&a.team(i),void 0===t.teams&&a.teams&&void 0!==r&&a.teams(r),void 0===t.getAlias&&a.getAlias&&void 0!==l&&a.getAlias(l),void 0===t.switchTeam&&a.switchTeam&&void 0!==s&&a.switchTeam(s),function(e){let t=[];for(let a=0;a<e.length;a++){let o=e[a].toLowerCase().replace(/ /g,"-");o!=i?t.push(o):t.push(null)}n=t}(r),`<nav>${null!=n?`<div class="nav-title">Other Teams</div>\n    <div class="team-links">${y(n,((e,t)=>""+(null!=e?""+(0==t||1==t&&null==n[0]?`\n            <button style="${"color: var(--"+p(n[t],!0)+"-secondary); background-color: var(--"+p(n[t],!0)+")"}" class="team-link first-team">${p(l(r[t]))}</button>`:""+(t==n.length-1||t==n.length-2&&null==n[n.length-1]?`\n            <button style="${"color: var(--"+p(n[t],!0)+"-secondary); background-color: var(--"+p(n[t],!0)+")"}" class="team-link last-team">${p(l(r[t]))}</button>`:`<button style="${"color: var(--"+p(e,!0)+"-secondary); background-color: var(--"+p(e,!0)+")"}" class="team-link">${p(l(r[t]))}</button>`)):"")))}</div>`:""}</nav>\n\n`}));function Le(e){return e.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ").replace("And","and")}function Ae(e,t){return 0==Object.keys(e.form[e._id][t]).length?null:Object.keys(e.form[e._id][t]).reduce(((a,o)=>e.form[e._id][t][a]>e.form[e._id][t][o]?a:o))}const Se=x(((e,t,a,o)=>{let n={"Wolverhampton Wanderers":"Wolves","Tottenham Hotspur":"Spurs","Leeds United":"Leeds","West Ham United":"West Ham","Brighton and Hove Albion":"Brighton"};function i(e){return e in n?n[e]:e}function r(e){return Object.values(n).includes(e)?Object.keys(n).find((t=>n[t]===e)):e}let s=["Manchester City","Liverpool","Chelsea","Tottenham Hotspur","Arsenal","Manchester United","West Ham United","Leicester City","Brighton and Hove Albion","Wolverhampton Wanderers","Newcastle United","Crystal Palace","Brentford","Aston Villa","Southampton","Everton","Leeds United","Fulham","Bournemouth","Nottingham Forest"];function d(){v=Le(f.replace(/\-/g," ")),async function(e){const t=await fetch(e);return await t.json()}("https://pldashboard.herokuapp.com/api/teams").then((e=>{u=Ae(e,v),m=e,console.log(m)})).then((()=>{window.dispatchEvent(new Event("resize"))}))}function c(e){f=e,v=Le(f.replace(/\-/g," ")),u=Ae(m,v),window.history.pushState(null,null,f)}let u,m,v="";l((()=>{d()}));let{team:f}=t;return void 0===t.team&&a.team&&void 0!==f&&a.team(f),`${e.head+=(e.title=`<title>${p(v)}</title>`,"")+'<meta name="description" content="Premier League Statistics Dashboard">',""}\n\n${$(H,"Router").$$render(e,{},{},{default:()=>`<div id="team"><div id="navBar">${$(Ee,"NavBar").$$render(e,{team:f,teams:s,getAlias:i,switchTeam:c},{},{})}</div>\n    <div id="dashboard"><div class="header" style="${"background-color: var(--"+p(f,!0)+");"}"><a class="main-link no-decoration" href="${"/"+p(f,!0)}"><div class="title" style="${"color: var(--"+p(f+"-secondary",!0)+");"}">${p(i(v))}</div></a></div>\n\n      ${null!=m?`<div class="page-content"><div class="row multi-element-row small-bottom-margin"><div class="row-left position-no-badge"><div class="circles-background-container"><svg class="circles-background"><circle cx="300" cy="150" r="100" stroke-width="0" fill="${"var(--"+p(f,!0)+"-secondary)"}"></circle><circle cx="170" cy="170" r="140" stroke-width="0" fill="${"var(--"+p(f,!0)+")"}"></circle><circle cx="300" cy="320" r="170" stroke-width="0" fill="${"var(--"+p(f,!0)+")"}"></circle></svg></div>\n                <div class="position-central">${p(m.standings[v][m._id].position)}</div></div>\n            <div class="row-right fixtures-graph row-graph"><h1 class="lowered">Fixtures</h1>\n              <div class="graph mini-graph">${$(ne,"Fixtures").$$render(e,{data:m,fullTeamName:v},{},{})}</div></div></div>\n\n          <div class="row multi-element-row"><div class="row-left form-details">${$(Y,"CurrentForm").$$render(e,{data:m,currentMatchday:u,fullTeamName:v},{},{})}\n              ${$(q,"TableSnippet").$$render(e,{data:m,team:f,fullTeamName:v,getAlias:i,switchTeam:c},{},{})}</div>\n            <div class="row-right">${$(J,"NextGame").$$render(e,{data:m,currentMatchday:u,fullTeamName:v,showBadge:false,getAlias:i,switchTeam:c},{},{})}</div></div>\n\n          <div class="row"><div class="form-graph row-graph"><h1 class="lowered">Form Over Time</h1>\n              <div class="graph full-row-graph">${$(re,"FormOverTime").$$render(e,{data:m,fullTeamName:v},{},{})}</div></div></div>\n\n          <div class="row"><div class="position-over-time-graph row-graph"><h1 class="lowered">Position Over Time</h1>\n              <div class="graph full-row-graph">${$(se,"PositionOverTime").$$render(e,{data:m,fullTeamName:v},{},{})}</div></div></div>\n\n          <div class="row no-bottom-margin"><div class="goals-scored-vs-conceded-graph row-graph"><h1 class="lowered">Goals Scored and Conceded</h1>\n              <div class="graph full-row-graph">${$(ce,"GoalsScoredAndConceded").$$render(e,{data:m,fullTeamName:v},{},{})}</div></div></div>\n\n          <div class="row"><div class="row-graph"><div class="clean-sheets graph full-row-graph">${$(me,"CleanSheets").$$render(e,{data:m,fullTeamName:v},{},{})}</div></div></div>\n\n          <div class="season-stats-row">${$(ee,"SeasonStats").$$render(e,{data:m,fullTeamName:v},{},{})}</div>\n\n          <div class="row"><div class="goals-freq-row row-graph"><h1>Goals Per Game</h1>\n              ${$(ye,"GoalFrequencies").$$render(e,{data:m,fullTeamName:v},{},{})}</div></div>\n\n          <div class="row"><div class="spider-chart-row row-graph"><div class="spider-chart-container">${$(Ce,"Spider").$$render(e,{data:m,fullTeamName:v,getAlias:i,getName:r},{},{})}</div></div></div>\n\n          ${$(Be,"MobileViewNav").$$render(e,{team:f,teams:s,getAlias:i,switchTeam:c},{},{})}\n\n          ${$(te,"TeamsFooter").$$render(e,{lastUpdated:m.lastUpdated},{},{})}</div>`:'<div class="loading-spinner-container"><div class="loading-spinner"></div></div>'}</div></div>`})}\n\n`})),Ie=x(((e,t,a,o)=>`${e.head+=(e.title="<title>Premier League</title>","")+'<meta name="description" content="Premier League Statistics Dashboard">',""}\n\n${$(H,"Router").$$render(e,{},{},{default:()=>'<div id="home"><div class="content"><img src="img/pldashboard4.png" alt="pldashboard">\n      <div class="links"><div class="dashboard-link-container"><a class="dashboard-link" href="/">Dashboard</a></div>\n        <div class="fantasy-link-container"><a class="fantasy-link" href="/">FPL</a></div></div>\n      </div></div>'})}\n\n`));function Pe(e,t){return Math.round(e.homeGoals)==t.homeGoals&&Math.round(e.awayGoals)==t.awayGoals}function De(e,t){return e.homeGoals>e.awayGoals&&t.homeGoals>t.awayGoals||e.homeGoals==e.awayGoals&&t.homeGoals==t.awayGoals||e.homeGoals<e.awayGoals&&t.homeGoals<t.awayGoals}const Ge=x(((e,t,a,o)=>{let n;return l((()=>{(async function(e){const t=await fetch(e);return await t.json()})("https://pldashboard.herokuapp.com/api/predictions").then((e=>{!function(e){e.predictions.sort(((e,t)=>new Date(t._id)-new Date(e._id)));for(let t=0;t<e.predictions.length;t++)e.predictions[t].predictions.sort(((e,t)=>new Date(e._id)-new Date(t._id)))}(e),function(e){for(let t=0;t<e.predictions.length;t++)for(let a=0;a<e.predictions[t].predictions.length;a++){let o=e.predictions[t].predictions[a];null!=o.actual&&(Pe(o.prediction,o.actual)?o.colour="green":De(o.prediction,o.actual)?o.colour="yellow":o.colour="red")}}(e),n=e,console.log(n.predictions)}))})),`${e.head+=(e.title="<title>Predictions</title>","")+'<meta name="description" content="Premier League Statistics Dashboard">',""}\n\n${$(H,"Router").$$render(e,{},{},{default:()=>`<div id="predictions"><div class="predictions-header"><a class="predictions-title" href="/predictions">Predictions</a></div>\n\n  ${null!=n?`<div class="page-content"><div class="accuracy-display"><div class="accuracy"><span class="accuracy-item">Predicting with accuracy: <b>${p((100*n.accuracy.scoreAccuracy).toFixed(2))}%</b></span><br>\n          <div class="accuracy-item">General results accuracy: <b>${p((100*n.accuracy.resultAccuracy).toFixed(2))}%</b></div></div></div>\n\n      <div class="predictions-container"><div class="predictions">${null!=n.predictions?`${y(n.predictions,(({_id:e,predictions:t})=>`<div class="date">${p(e)}</div>\n              <div class="medium-predictions-divider"></div>\n              \n              ${y(t,(e=>`<button class="${"prediction-container "+p(e.colour,!0)}"><div class="prediction prediction-item"><div class="prediction-label">Predicted:</div>\n                    <div class="prediction-value"><div class="prediction-initials">${p(e.home)}</div>\n                      <div class="prediction-score">${p(Math.round(e.prediction.homeGoals))} - ${p(Math.round(e.prediction.awayGoals))}</div>\n                      <div class="prediction-initials">${p(e.away)}</div>\n                    </div></div>\n                  ${null!=e.actual?`<div class="actual prediction-item"><div class="prediction-label">Actual:</div>\n                      <div class="prediction-value"><div class="prediction-initials">${p(e.home)}</div>\n                        <div class="prediction-score">${p(e.actual.homeGoals)} - ${p(e.actual.awayGoals)}</div>\n                        <div class="prediction-initials">${p(e.away)}</div></div>\n                    </div>`:`<div class="prediction-time">${p(function(e){let t=new Date(e);return t=t.toTimeString().slice(0,5),t}(e.datetime))}\n                    </div>`}\n\n                  \n                  ${null!=e.prediction?`<div class="prediction-details"${T("id",e._id,0)}><div class="detailed-predicted-score"><b>${p(e.prediction.homeGoals)} - ${p(e.prediction.awayGoals)}</b></div>\n                    </div>`:""}\n                </button>`))}\n              <div class="predictions-gap"></div>`))}`:""}</div></div></div>\n\n    <div class="predictions-footer footer-text-colour"><div class="method-description">Predictions are calculated using previous results and then adjusting by\n        recent form and home advantage.\n      </div>\n      </div>`:'<div class="loading-spinner-container"><div class="loading-spinner"></div></div>'}</div>`})}\n\n`})),Oe=x(((e,t,a,o)=>{let{url:n=""}=t;return void 0===t.url&&a.url&&void 0!==n&&a.url(n),`${$(H,"Router").$$render(e,{url:n},{},{default:()=>`${$(R,"Route").$$render(e,{path:"/"},{},{default:()=>`${$(Se,"Team").$$render(e,{team:"manchester-city"},{},{})}`})}\n  ${$(R,"Route").$$render(e,{path:"/predictions",component:Ge},{},{})}\n  ${$(R,"Route").$$render(e,{path:"/:team"},{},{default:({params:t})=>`${$(Se,"Team").$$render(e,{team:t.team},{},{})}`})}\n  ${$(R,"Route").$$render(e,{path:"/teams",component:W},{},{})}\n  ${$(R,"Route").$$render(e,{path:"/home",component:Ie},{},{})}`})}`}));module.exports=Oe;
